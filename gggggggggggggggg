<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏≠‡∏≤‡∏â‡∏µ‡∏•‡∏µ‡πà üíú</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        text-align: center;
        background: linear-gradient(135deg, #1d1b2e 0%, #2d1b3d 100%);
        color: white;
        padding: 20px;
        min-height: 100vh;
        margin: 0;
    }
    h1 {
        font-size: 2.5em;
        margin: 20px 0;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    p {
        font-size: 1.2em;
        color: #d9b3ff;
    }
    #spinCount {
        font-size: 1.1em;
        color: #ffd700;
        margin-top: 10px;
        font-weight: bold;
    }
    #wheelContainer {
        position: relative;
        display: inline-block;
        margin-top: 20px;
    }
    #pointer {
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 20px solid transparent;
        border-right: 20px solid transparent;
        border-top: 35px solid #ffd700;
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
        z-index: 10;
    }
    canvas {
        border-radius: 50%;
        box-shadow: 0 8px 30px rgba(160, 32, 240, 0.5);
    }
    .button-group {
        margin-top: 30px;
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
    }
    button {
        padding: 15px 40px;
        font-size: 18px;
        font-weight: bold;
        border: none;
        border-radius: 25px;
        color: white;
        cursor: pointer;
        transition: all 0.3s;
    }
    #spinBtn {
        background: linear-gradient(135deg, #a020f0 0%, #d946ef 100%);
        box-shadow: 0 4px 15px rgba(160, 32, 240, 0.4);
    }
    #spinBtn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(160, 32, 240, 0.6);
    }
    #editBtn {
        background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
        box-shadow: 0 4px 15px rgba(6, 182, 212, 0.4);
    }
    #editBtn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(6, 182, 212, 0.6);
    }
    #resetBtn {
        background: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);
        box-shadow: 0 4px 15px rgba(236, 72, 153, 0.4);
    }
    #resetBtn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(236, 72, 153, 0.6);
    }
    button:active {
        transform: scale(0.95);
    }
    button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }
    #result {
        margin-top: 30px;
        font-size: 1.8em;
        min-height: 60px;
        color: #ffd700;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        animation: fadeIn 0.5s;
    }
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        z-index: 100;
        justify-content: center;
        align-items: center;
    }
    .modal-content {
        background: linear-gradient(135deg, #2d1b3d 0%, #1d1b2e 100%);
        padding: 30px;
        border-radius: 20px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 10px 40px rgba(160, 32, 240, 0.5);
    }
    .modal-content h2 {
        margin-top: 0;
        color: #d9b3ff;
    }
    .modal-content textarea {
        width: 100%;
        min-height: 300px;
        padding: 15px;
        font-size: 16px;
        border-radius: 10px;
        border: 2px solid #a020f0;
        background: #1d1b2e;
        color: white;
        font-family: 'Segoe UI', sans-serif;
        margin: 15px 0;
        box-sizing: border-box;
    }
    .modal-content button {
        margin: 5px;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
</head>
<body>

<h1>üíú ‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏≠‡∏≤‡∏â‡∏µ‡∏•‡∏µ‡πà üíú</h1>
<p>‡∏´‡∏°‡∏∏‡∏ô‡∏•‡πâ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!</p>
<p id="spinCount"></p>

<div id="wheelContainer">
    <div id="pointer"></div>
    <canvas id="wheelCanvas" width="400" height="400"></canvas>
</div>

<div class="button-group">
    <button id="spinBtn" onclick="spinWheel()">‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏•‡∏¢! ‚ú®</button>
    <button id="editBtn" onclick="openEditModal()">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥ ‚úèÔ∏è</button>
    <button id="resetBtn" onclick="resetWheel()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï üîÑ</button>
</div>

<h2 id="result"></h2>

<!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥ -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <h2>‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡πÉ‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠</h2>
        <p style="color: #d9b3ff; font-size: 14px;">‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏≥‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ 6-14 ‡∏Ñ‡∏≥)</p>
        <textarea id="optionsInput"></textarea>
        <button id="spinBtn" onclick="saveOptions()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‚úÖ</button>
        <button id="resetBtn" onclick="closeEditModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å ‚ùå</button>
    </div>
</div>

<script>
    let options = [
        "‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏°‡∏≤‡∏Å üíú",
        "‡πÄ‡∏≠‡∏≤",
        "‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏∞‡∏ó‡∏±‡∏ô‡∏´‡∏±‡∏ô üí∏",
        "‡πÑ‡∏°‡πà‡πÄ‡∏≠‡∏≤",
        "‡∏°‡∏µ‡∏Ñ‡∏ô‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏∏‡∏ì ‚ú®",
        "‡∏û‡∏±‡∏Å‡πÑ‡∏ß‡πâ‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ",
        "‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤",
        "‡πÑ‡∏î‡πâ‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏î‡∏µ ‡πÜ üí°",
        "‡πÑ‡∏õ",
        "‡∏°‡∏µ‡πÄ‡∏™‡∏ô‡πà‡∏´‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© üíú",
        "‡πÑ‡∏°‡πà‡πÑ‡∏õ",
        "‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á üí∞",
        "‡∏û‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô",
        "‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏µ ‡πÜ ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß üè†"
    ];

    const defaultOptions = [...options];
    const MAX_SPINS = 3;

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô
    function getSpinData() {
        const today = new Date().toDateString();
        const data = JSON.parse(localStorage.getItem('wheelSpinData') || '{}');
        
        if (data.date !== today) {
            return { date: today, count: 0 };
        }
        return data;
    }

    function saveSpinData(count) {
        const today = new Date().toDateString();
        localStorage.setItem('wheelSpinData', JSON.stringify({ date: today, count }));
    }

    function updateSpinCount() {
        const spinData = getSpinData();
        const remaining = MAX_SPINS - spinData.count;
        const countDisplay = document.getElementById('spinCount');
        
        if (remaining > 0) {
            countDisplay.innerHTML = `üé≤ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: <span style="color: #ffd700; font-size: 1.3em;">${remaining}/${MAX_SPINS}</span> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`;
            document.getElementById('spinBtn').disabled = false;
        } else {
            countDisplay.innerHTML = `‚è∞ ‡∏´‡∏°‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß! ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ô‡∏∞‡∏Ñ‡∏∞ üíú`;
            document.getElementById('spinBtn').disabled = true;
        }
    }

    const canvas = document.getElementById("wheelCanvas");
    const ctx = canvas.getContext("2d");
    const size = canvas.width / 2;
    let arc = (2 * Math.PI) / options.length;
    let angle = 0;
    let spinning = false;

    const colors = ["#b366ff", "#d9b3ff", "#9d4edd", "#c77dff", "#b088f9", "#da9ff9"];

    function drawWheel() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        arc = (2 * Math.PI) / options.length;
        
        for (let i = 0; i < options.length; i++) {
            const start = angle + i * arc;
            ctx.beginPath();
            ctx.fillStyle = colors[i % colors.length];
            ctx.moveTo(size, size);
            ctx.arc(size, size, size - 10, start, start + arc);
            ctx.fill();
            ctx.strokeStyle = "#fff";
            ctx.lineWidth = 2;
            ctx.stroke();

            ctx.save();
            ctx.translate(size, size);
            ctx.rotate(start + arc / 2);
            ctx.textAlign = "right";
            ctx.fillStyle = "#000";
            ctx.font = "bold 14px sans-serif";
            ctx.fillText(options[i], size - 20, 5);
            ctx.restore();
        }

        // Center circle
        ctx.beginPath();
        ctx.fillStyle = "#ffd700";
        ctx.arc(size, size, 30, 0, 2 * Math.PI);
        ctx.fill();
        ctx.strokeStyle = "#fff";
        ctx.lineWidth = 3;
        ctx.stroke();
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    updateSpinCount();
    drawWheel();

    function spinWheel() {
        if (spinning) return;
        
        const spinData = getSpinData();
        if (spinData.count >= MAX_SPINS) {
            alert("‡∏´‡∏°‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞! üíú ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ô‡∏∞‡∏Ñ‡∏∞");
            return;
        }
        
        spinning = true;
        document.getElementById("spinBtn").disabled = true;
        document.getElementById("result").innerText = "";

        // ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å (0.3 - 0.8)
        let speed = Math.random() * 0.5 + 0.3;
        // ‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏ä‡∏∞‡∏•‡∏≠‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô (0.993 - 0.998)
        const slow = Math.random() * 0.005 + 0.993;
        const minSpeed = 0.001;

        const spin = setInterval(() => {
            angle += speed;
            speed *= slow;

            drawWheel();

            if (speed < minSpeed) {
                clearInterval(spin);
                spinning = false;

                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏∏‡∏ô
                saveSpinData(spinData.count + 1);
                updateSpinCount();

                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏ó‡∏µ‡πà‡∏ä‡∏µ‡πâ (‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á = 270 ‡∏≠‡∏á‡∏®‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠ -90 ‡∏≠‡∏á‡∏®‡∏≤)
                const pointerAngle = (3 * Math.PI / 2); // 270 degrees (‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô)
                const normalizedAngle = (pointerAngle - angle) % (2 * Math.PI);
                const positiveAngle = (normalizedAngle + 2 * Math.PI) % (2 * Math.PI);
                const index = Math.floor(positiveAngle / arc);
                const result = options[index];

                setTimeout(() => {
                    document.getElementById("result").innerText = "‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: " + result;
                }, 100);
            }
        }, 16);
    }

    function openEditModal() {
        document.getElementById("optionsInput").value = options.join("\n");
        document.getElementById("editModal").style.display = "flex";
    }

    function closeEditModal() {
        document.getElementById("editModal").style.display = "none";
    }

    function saveOptions() {
        const input = document.getElementById("optionsInput").value;
        const newOptions = input.split("\n").filter(line => line.trim() !== "");
        
        if (newOptions.length < 3) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏Ñ‡∏≥!");
            return;
        }
        
        if (newOptions.length > 20) {
            alert("‡πÉ‡∏™‡πà‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 20 ‡∏Ñ‡∏≥‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô!");
            return;
        }

        options = newOptions;
        arc = (2 * Math.PI) / options.length;
        angle = 0;
        document.getElementById("result").innerText = "";
        drawWheel();
        closeEditModal();
    }

    function resetWheel() {
        if (spinning) return;
        
        if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
            options = [...defaultOptions];
            arc = (2 * Math.PI) / options.length;
            angle = 0;
            document.getElementById("result").innerText = "";
            drawWheel();
        }
    }

    // ‡∏õ‡∏¥‡∏î modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
    window.onclick = function(event) {
        const modal = document.getElementById("editModal");
        if (event.target === modal) {
            closeEditModal();
        }
    }
</script>

</body>
</html>
